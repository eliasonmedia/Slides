/*
* Slides, A Slideshow Plugin for jQuery
* URL: https://github.com/eliasonmedia/Slides/tree/SlidesJS-1
* Intructions: http://slidesjs.com
* By: Nathan Searles, http://nathansearles.com
* Modified By: Eric Heikes, eric@goodsmiths.com
* Version: 1.2
* Updated: May 16, 2013
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
!function(e){e.fn.slides=function(n){return n=e.extend({},e.fn.slides.option,n),this.each(function(){function i(i,a,t){if(!d&&o){switch(d=!0,n.animationStart(H+1),i){case"next":z=H,y=H+1,y=m===y?0:y,c=2*v,i=2*-v,H=y;break;case"prev":z=H,y=H-1,y=-1===y?m-1:y,c=0,i=0,H=y;break;case"pagination":y=parseInt(t,10),z=e("."+n.paginationClass+" li."+n.currentClass+" a",u).attr("href").match("[^#/]+$"),y>z?(c=2*v,i=2*-v):(c=0,i=0),H=y}"fade"===a?n.crossfade?g.children(":eq("+y+")",u).css({zIndex:10}).fadeIn(n.fadeSpeed,n.fadeEasing,function(){n.autoHeight?g.animate({height:g.children(":eq("+y+")",u).outerHeight()},n.autoHeightSpeed,function(){g.children(":eq("+z+")",u).css({display:"none",zIndex:0}),g.children(":eq("+y+")",u).css({zIndex:0}),n.animationComplete(y+1),d=!1}):(g.children(":eq("+z+")",u).css({display:"none",zIndex:0}),g.children(":eq("+y+")",u).css({zIndex:0}),n.animationComplete(y+1),d=!1)}):g.children(":eq("+z+")",u).fadeOut(n.fadeSpeed,n.fadeEasing,function(){n.autoHeight?g.animate({height:g.children(":eq("+y+")",u).outerHeight()},n.autoHeightSpeed,function(){g.children(":eq("+y+")",u).fadeIn(n.fadeSpeed,n.fadeEasing)}):g.children(":eq("+y+")",u).fadeIn(n.fadeSpeed,n.fadeEasing,function(){}),n.animationComplete(y+1),d=!1}):(g.children(":eq("+y+")").css({left:c,display:"block"}),n.autoHeight?g.animate({left:i,height:g.children(":eq("+y+")").outerHeight()},n.slideSpeed,n.slideEasing,function(){g.css({left:-v}),g.children(":eq("+y+")").css({left:v,zIndex:5}),g.children(":eq("+z+")").css({left:v,display:"none",zIndex:0}),n.animationComplete(y+1),d=!1}):g.animate({left:i},n.slideSpeed,n.slideEasing,function(){g.css({left:-v}),g.children(":eq("+y+")").css({left:v,zIndex:5}),g.children(":eq("+z+")").css({left:v,display:"none",zIndex:0}),n.animationComplete(y+1),d=!1})),n.pagination&&(e("."+n.paginationClass+" li."+n.currentClass,u).removeClass(n.currentClass),e("."+n.paginationClass+" li:eq("+y+")",u).addClass(n.currentClass))}}function a(){clearInterval(u.data("interval"))}function t(){n.pause?(clearTimeout(u.data("pause")),clearInterval(u.data("interval")),h=setTimeout(function(){clearTimeout(u.data("pause")),p=setInterval(function(){i("next",C)},n.play),u.data("interval",p)},n.pause),u.data("pause",h)):a()}function s(){n.ratio!==!1&&(v=u.width(),q=v/n.ratio,e("."+n.container,u).css({height:q}),g.children().css({height:q,width:v}),r())}function r(){g.children().css({left:g.children().outerWidth()}),g.css({position:"relative",width:3*v,height:q,left:-v})}e("."+n.container,e(this)).children().wrapAll('<div class="slides_control"/>');var o,d,l,c,f,h,p,u=e(this),g=e(".slides_control",u),m=g.children().size(),v=g.children().outerWidth(),q=g.children().outerHeight(),x=n.start-1,C=n.effect.indexOf(",")<0?n.effect:n.effect.replace(" ","").split(",")[0],I=n.effect.indexOf(",")<0?C:n.effect.replace(" ","").split(",")[1],y=0,z=0,S=0,H=0;if(2>m)return e("."+n.container,e(this)).fadeIn(n.fadeSpeed,n.fadeEasing,function(){o=!0,n.slidesLoaded()}),e("."+n.next+", ."+n.prev).fadeOut(0),!1;if(!(2>m)){if(0>x&&(x=0),x>m&&(x=m-1),n.start&&(H=x),n.randomize&&g.randomize(),e("."+n.container,u).css({overflow:"hidden",position:"relative"}),g.children().css({position:"absolute",top:0,left:g.children().outerWidth(),zIndex:0,display:"none"}),s(),e("."+n.container,u).css({display:"block"}),n.autoHeight&&(g.children().css({height:"auto"}),g.animate({height:g.children(":eq("+x+")").outerHeight()},n.autoHeightSpeed)),n.preload&&g.find("img:eq("+x+")").length){e("."+n.container,u).css({background:"url("+n.preloadImage+") no-repeat 50% 50%"});var k=g.find("img:eq("+x+")").attr("src")+"?"+(new Date).getTime();f="slides_control"!=e("img",u).parent().attr("class")?g.children(":eq(0)")[0].tagName.toLowerCase():g.find("img:eq("+x+")"),g.find("img:eq("+x+")").attr("src",k).load(function(){g.find(f+":eq("+x+")").fadeIn(n.fadeSpeed,n.fadeEasing,function(){e(this).css({zIndex:5}),e("."+n.container,u).css({background:""}),o=!0,n.slidesLoaded()})})}else g.children(":eq("+x+")").fadeIn(n.fadeSpeed,n.fadeEasing,function(){o=!0,n.slidesLoaded()});n.bigTarget&&(g.children().css({cursor:"pointer"}),g.children().on("click",function(){return i("next",C),!1})),n.hoverPause&&n.play&&(g.bind("mouseover",function(){a()}),g.bind("mouseleave",function(){t()})),n.generateNextPrev&&(e("."+n.container,u).after('<a href="#" class="'+n.prev+'">Prev</a>'),e("."+n.prev,u).after('<a href="#" class="'+n.next+'">Next</a>')),e("."+n.next,u).on("click",function(e){e.preventDefault(),n.play&&t(),i("next",C)}),e("."+n.prev,u).on("click",function(e){e.preventDefault(),n.play&&t(),i("prev",C)}),n.generatePagination?(n.prependPagination?u.prepend("<ul class="+n.paginationClass+"></ul>"):u.append("<ul class="+n.paginationClass+"></ul>"),g.children().each(function(){e("."+n.paginationClass,u).append('<li><a href="#'+S+'">'+(S+1)+"</a></li>"),S++})):e("."+n.paginationClass+" li a",u).each(function(){e(this).attr("href","#"+S),S++}),e("."+n.paginationClass+" li:eq("+x+")",u).addClass(n.currentClass),e("."+n.paginationClass+" li a",u).on("click",function(){return n.play&&t(),l=e(this).attr("href").match("[^#/]+$"),H!=l&&i("pagination",I,l),!1}),e("a.link",u).on("click",function(){return n.play&&t(),l=e(this).attr("href").match("[^#/]+$")-1,H!=l&&i("pagination",I,l),!1}),e(window).resize(function(){s()}),n.play&&(p=setInterval(function(){i("next",C)},n.play),u.data("interval",p))}})},e.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,ratio:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},e.fn.randomize=function(n){function a(){return Math.round(Math.random())-.5}return e(this).each(function(){var t=e(this),s=t.children(),r=s.length;if(r>1){s.hide();var o=[];for(i=0;r>i;i++)o[o.length]=i;o=o.sort(a),e.each(o,function(e,i){var a=s.eq(i),r=a.clone(!0);r.show().appendTo(t),void 0!==n&&n(a,r),a.remove()})}})}}(jQuery);